import{i as Gt,r as Kt,x as se,s as Qt,n as Ge,a as ee,t as kt}from"./index-DqP_DhNV.js";import"./chunk.BWPPYEQO-_p6yYr53.js";var fe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ht(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}function ue(h){throw new Error('Could not dynamically require "'+h+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var we={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/var je;function Xt(){return je||(je=1,function(h,_){(function(p){h.exports=p()})(function(){return function p(N,x,y){function L(O,W){if(!x[O]){if(!N[O]){var d=typeof ue=="function"&&ue;if(!W&&d)return d(O,!0);if(R)return R(O,!0);var m=new Error("Cannot find module '"+O+"'");throw m.code="MODULE_NOT_FOUND",m}var T=x[O]={exports:{}};N[O][0].call(T.exports,function(P){var j=N[O][1][P];return L(j||P)},T,T.exports,p,N,x,y)}return x[O].exports}for(var R=typeof ue=="function"&&ue,F=0;F<y.length;F++)L(y[F]);return L}({1:[function(p,N,x){(function(y){var L=y.MutationObserver||y.WebKitMutationObserver,R;if(L){var F=0,O=new L(P),W=y.document.createTextNode("");O.observe(W,{characterData:!0}),R=function(){W.data=F=++F%2}}else if(!y.setImmediate&&typeof y.MessageChannel<"u"){var d=new y.MessageChannel;d.port1.onmessage=P,R=function(){d.port2.postMessage(0)}}else"document"in y&&"onreadystatechange"in y.document.createElement("script")?R=function(){var C=y.document.createElement("script");C.onreadystatechange=function(){P(),C.onreadystatechange=null,C.parentNode.removeChild(C),C=null},y.document.documentElement.appendChild(C)}:R=function(){setTimeout(P,0)};var m,T=[];function P(){m=!0;for(var C,G,$=T.length;$;){for(G=T,T=[],C=-1;++C<$;)G[C]();$=T.length}m=!1}N.exports=j;function j(C){T.push(C)===1&&!m&&R()}}).call(this,typeof fe<"u"?fe:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(p,N,x){var y=p(1);function L(){}var R={},F=["REJECTED"],O=["FULFILLED"],W=["PENDING"];N.exports=d;function d(c){if(typeof c!="function")throw new TypeError("resolver must be a function");this.state=W,this.queue=[],this.outcome=void 0,c!==L&&j(this,c)}d.prototype.catch=function(c){return this.then(null,c)},d.prototype.then=function(c,w){if(typeof c!="function"&&this.state===O||typeof w!="function"&&this.state===F)return this;var b=new this.constructor(L);if(this.state!==W){var I=this.state===O?c:w;T(b,I,this.outcome)}else this.queue.push(new m(b,c,w));return b};function m(c,w,b){this.promise=c,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof b=="function"&&(this.onRejected=b,this.callRejected=this.otherCallRejected)}m.prototype.callFulfilled=function(c){R.resolve(this.promise,c)},m.prototype.otherCallFulfilled=function(c){T(this.promise,this.onFulfilled,c)},m.prototype.callRejected=function(c){R.reject(this.promise,c)},m.prototype.otherCallRejected=function(c){T(this.promise,this.onRejected,c)};function T(c,w,b){y(function(){var I;try{I=w(b)}catch(B){return R.reject(c,B)}I===c?R.reject(c,new TypeError("Cannot resolve promise with itself")):R.resolve(c,I)})}R.resolve=function(c,w){var b=C(P,w);if(b.status==="error")return R.reject(c,b.value);var I=b.value;if(I)j(c,I);else{c.state=O,c.outcome=w;for(var B=-1,M=c.queue.length;++B<M;)c.queue[B].callFulfilled(w)}return c},R.reject=function(c,w){c.state=F,c.outcome=w;for(var b=-1,I=c.queue.length;++b<I;)c.queue[b].callRejected(w);return c};function P(c){var w=c&&c.then;if(c&&(typeof c=="object"||typeof c=="function")&&typeof w=="function")return function(){w.apply(c,arguments)}}function j(c,w){var b=!1;function I(z){b||(b=!0,R.reject(c,z))}function B(z){b||(b=!0,R.resolve(c,z))}function M(){w(B,I)}var U=C(M);U.status==="error"&&I(U.value)}function C(c,w){var b={};try{b.value=c(w),b.status="success"}catch(I){b.status="error",b.value=I}return b}d.resolve=G;function G(c){return c instanceof this?c:R.resolve(new this(L),c)}d.reject=$;function $(c){var w=new this(L);return R.reject(w,c)}d.all=le;function le(c){var w=this;if(Object.prototype.toString.call(c)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=c.length,I=!1;if(!b)return this.resolve([]);for(var B=new Array(b),M=0,U=-1,z=new this(L);++U<b;)K(c[U],U);return z;function K(te,ae){w.resolve(te).then(ce,function(q){I||(I=!0,R.reject(z,q))});function ce(q){B[ae]=q,++M===b&&!I&&(I=!0,R.resolve(z,B))}}}d.race=J;function J(c){var w=this;if(Object.prototype.toString.call(c)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=c.length,I=!1;if(!b)return this.resolve([]);for(var B=-1,M=new this(L);++B<b;)U(c[B]);return M;function U(z){w.resolve(z).then(function(K){I||(I=!0,R.resolve(M,K))},function(K){I||(I=!0,R.reject(M,K))})}}},{1:1}],3:[function(p,N,x){(function(y){typeof y.Promise!="function"&&(y.Promise=p(2))}).call(this,typeof fe<"u"?fe:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(p,N,x){var y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function L(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function R(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var F=R();function O(){try{if(!F||!F.open)return!1;var e=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),r=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!e||r)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function W(e,r){e=e||[],r=r||{};try{return new Blob(e,r)}catch(n){if(n.name!=="TypeError")throw n;for(var t=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,a=new t,o=0;o<e.length;o+=1)a.append(e[o]);return a.getBlob(r.type)}}typeof Promise>"u"&&p(3);var d=Promise;function m(e,r){r&&e.then(function(t){r(null,t)},function(t){r(t)})}function T(e,r,t){typeof r=="function"&&e.then(r),typeof t=="function"&&e.catch(t)}function P(e){return typeof e!="string"&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function j(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var C="local-forage-detect-blob-support",G=void 0,$={},le=Object.prototype.toString,J="readonly",c="readwrite";function w(e){for(var r=e.length,t=new ArrayBuffer(r),a=new Uint8Array(t),o=0;o<r;o++)a[o]=e.charCodeAt(o);return t}function b(e){return new d(function(r){var t=e.transaction(C,c),a=W([""]);t.objectStore(C).put(a,"key"),t.onabort=function(o){o.preventDefault(),o.stopPropagation(),r(!1)},t.oncomplete=function(){var o=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);r(n||!o||parseInt(o[1],10)>=43)}}).catch(function(){return!1})}function I(e){return typeof G=="boolean"?d.resolve(G):b(e).then(function(r){return G=r,G})}function B(e){var r=$[e.name],t={};t.promise=new d(function(a,o){t.resolve=a,t.reject=o}),r.deferredOperations.push(t),r.dbReady?r.dbReady=r.dbReady.then(function(){return t.promise}):r.dbReady=t.promise}function M(e){var r=$[e.name],t=r.deferredOperations.pop();if(t)return t.resolve(),t.promise}function U(e,r){var t=$[e.name],a=t.deferredOperations.pop();if(a)return a.reject(r),a.promise}function z(e,r){return new d(function(t,a){if($[e.name]=$[e.name]||Ee(),e.db)if(r)B(e),e.db.close();else return t(e.db);var o=[e.name];r&&o.push(e.version);var n=F.open.apply(F,o);r&&(n.onupgradeneeded=function(i){var s=n.result;try{s.createObjectStore(e.storeName),i.oldVersion<=1&&s.createObjectStore(C)}catch(f){if(f.name==="ConstraintError")console.warn('The database "'+e.name+'" has been upgraded from version '+i.oldVersion+" to version "+i.newVersion+', but the storage "'+e.storeName+'" already exists.');else throw f}}),n.onerror=function(i){i.preventDefault(),a(n.error)},n.onsuccess=function(){var i=n.result;i.onversionchange=function(s){s.target.close()},t(i),M(e)}})}function K(e){return z(e,!1)}function te(e){return z(e,!0)}function ae(e,r){if(!e.db)return!0;var t=!e.db.objectStoreNames.contains(e.storeName),a=e.version<e.db.version,o=e.version>e.db.version;if(a&&(e.version!==r&&console.warn('The database "'+e.name+`" can't be downgraded from version `+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||t){if(t){var n=e.db.version+1;n>e.version&&(e.version=n)}return!0}return!1}function ce(e){return new d(function(r,t){var a=new FileReader;a.onerror=t,a.onloadend=function(o){var n=btoa(o.target.result||"");r({__local_forage_encoded_blob:!0,data:n,type:e.type})},a.readAsBinaryString(e)})}function q(e){var r=w(atob(e.data));return W([r],{type:e.type})}function Se(e){return e&&e.__local_forage_encoded_blob}function Ke(e){var r=this,t=r._initReady().then(function(){var a=$[r._dbInfo.name];if(a&&a.dbReady)return a.dbReady});return T(t,e,e),t}function Qe(e){B(e);for(var r=$[e.name],t=r.forages,a=0;a<t.length;a++){var o=t[a];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,K(e).then(function(n){return e.db=n,ae(e)?te(e):n}).then(function(n){e.db=r.db=n;for(var i=0;i<t.length;i++)t[i]._dbInfo.db=n}).catch(function(n){throw U(e,n),n})}function Q(e,r,t,a){a===void 0&&(a=1);try{var o=e.db.transaction(e.storeName,r);t(null,o)}catch(n){if(a>0&&(!e.db||n.name==="InvalidStateError"||n.name==="NotFoundError"))return d.resolve().then(function(){if(!e.db||n.name==="NotFoundError"&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),te(e)}).then(function(){return Qe(e).then(function(){Q(e,r,t,a-1)})}).catch(t);t(n)}}function Ee(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function ke(e){var r=this,t={db:null};if(e)for(var a in e)t[a]=e[a];var o=$[t.name];o||(o=Ee(),$[t.name]=o),o.forages.push(r),r._initReady||(r._initReady=r.ready,r.ready=Ke);var n=[];function i(){return d.resolve()}for(var s=0;s<o.forages.length;s++){var f=o.forages[s];f!==r&&n.push(f._initReady().catch(i))}var u=o.forages.slice(0);return d.all(n).then(function(){return t.db=o.db,K(t)}).then(function(l){return t.db=l,ae(t,r._defaultConfig.version)?te(t):l}).then(function(l){t.db=o.db=l,r._dbInfo=t;for(var v=0;v<u.length;v++){var g=u[v];g!==r&&(g._dbInfo.db=t.db,g._dbInfo.version=t.version)}})}function He(e,r){var t=this;e=P(e);var a=new d(function(o,n){t.ready().then(function(){Q(t._dbInfo,J,function(i,s){if(i)return n(i);try{var f=s.objectStore(t._dbInfo.storeName),u=f.get(e);u.onsuccess=function(){var l=u.result;l===void 0&&(l=null),Se(l)&&(l=q(l)),o(l)},u.onerror=function(){n(u.error)}}catch(l){n(l)}})}).catch(n)});return m(a,r),a}function Xe(e,r){var t=this,a=new d(function(o,n){t.ready().then(function(){Q(t._dbInfo,J,function(i,s){if(i)return n(i);try{var f=s.objectStore(t._dbInfo.storeName),u=f.openCursor(),l=1;u.onsuccess=function(){var v=u.result;if(v){var g=v.value;Se(g)&&(g=q(g));var S=e(g,v.key,l++);S!==void 0?o(S):v.continue()}else o()},u.onerror=function(){n(u.error)}}catch(v){n(v)}})}).catch(n)});return m(a,r),a}function Je(e,r,t){var a=this;e=P(e);var o=new d(function(n,i){var s;a.ready().then(function(){return s=a._dbInfo,le.call(r)==="[object Blob]"?I(s.db).then(function(f){return f?r:ce(r)}):r}).then(function(f){Q(a._dbInfo,c,function(u,l){if(u)return i(u);try{var v=l.objectStore(a._dbInfo.storeName);f===null&&(f=void 0);var g=v.put(f,e);l.oncomplete=function(){f===void 0&&(f=null),n(f)},l.onabort=l.onerror=function(){var S=g.error?g.error:g.transaction.error;i(S)}}catch(S){i(S)}})}).catch(i)});return m(o,t),o}function qe(e,r){var t=this;e=P(e);var a=new d(function(o,n){t.ready().then(function(){Q(t._dbInfo,c,function(i,s){if(i)return n(i);try{var f=s.objectStore(t._dbInfo.storeName),u=f.delete(e);s.oncomplete=function(){o()},s.onerror=function(){n(u.error)},s.onabort=function(){var l=u.error?u.error:u.transaction.error;n(l)}}catch(l){n(l)}})}).catch(n)});return m(a,r),a}function Ze(e){var r=this,t=new d(function(a,o){r.ready().then(function(){Q(r._dbInfo,c,function(n,i){if(n)return o(n);try{var s=i.objectStore(r._dbInfo.storeName),f=s.clear();i.oncomplete=function(){a()},i.onabort=i.onerror=function(){var u=f.error?f.error:f.transaction.error;o(u)}}catch(u){o(u)}})}).catch(o)});return m(t,e),t}function et(e){var r=this,t=new d(function(a,o){r.ready().then(function(){Q(r._dbInfo,J,function(n,i){if(n)return o(n);try{var s=i.objectStore(r._dbInfo.storeName),f=s.count();f.onsuccess=function(){a(f.result)},f.onerror=function(){o(f.error)}}catch(u){o(u)}})}).catch(o)});return m(t,e),t}function tt(e,r){var t=this,a=new d(function(o,n){if(e<0){o(null);return}t.ready().then(function(){Q(t._dbInfo,J,function(i,s){if(i)return n(i);try{var f=s.objectStore(t._dbInfo.storeName),u=!1,l=f.openKeyCursor();l.onsuccess=function(){var v=l.result;if(!v){o(null);return}e===0||u?o(v.key):(u=!0,v.advance(e))},l.onerror=function(){n(l.error)}}catch(v){n(v)}})}).catch(n)});return m(a,r),a}function rt(e){var r=this,t=new d(function(a,o){r.ready().then(function(){Q(r._dbInfo,J,function(n,i){if(n)return o(n);try{var s=i.objectStore(r._dbInfo.storeName),f=s.openKeyCursor(),u=[];f.onsuccess=function(){var l=f.result;if(!l){a(u);return}u.push(l.key),l.continue()},f.onerror=function(){o(f.error)}}catch(l){o(l)}})}).catch(o)});return m(t,e),t}function nt(e,r){r=j.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var a=this,o;if(!e.name)o=d.reject("Invalid arguments");else{var n=e.name===t.name&&a._dbInfo.db,i=n?d.resolve(a._dbInfo.db):K(e).then(function(s){var f=$[e.name],u=f.forages;f.db=s;for(var l=0;l<u.length;l++)u[l]._dbInfo.db=s;return s});e.storeName?o=i.then(function(s){if(s.objectStoreNames.contains(e.storeName)){var f=s.version+1;B(e);var u=$[e.name],l=u.forages;s.close();for(var v=0;v<l.length;v++){var g=l[v];g._dbInfo.db=null,g._dbInfo.version=f}var S=new d(function(E,D){var A=F.open(e.name,f);A.onerror=function(Y){var ne=A.result;ne.close(),D(Y)},A.onupgradeneeded=function(){var Y=A.result;Y.deleteObjectStore(e.storeName)},A.onsuccess=function(){var Y=A.result;Y.close(),E(Y)}});return S.then(function(E){u.db=E;for(var D=0;D<l.length;D++){var A=l[D];A._dbInfo.db=E,M(A._dbInfo)}}).catch(function(E){throw(U(e,E)||d.resolve()).catch(function(){}),E})}}):o=i.then(function(s){B(e);var f=$[e.name],u=f.forages;s.close();for(var l=0;l<u.length;l++){var v=u[l];v._dbInfo.db=null}var g=new d(function(S,E){var D=F.deleteDatabase(e.name);D.onerror=function(){var A=D.result;A&&A.close(),E(D.error)},D.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},D.onsuccess=function(){var A=D.result;A&&A.close(),S(A)}});return g.then(function(S){f.db=S;for(var E=0;E<u.length;E++){var D=u[E];M(D._dbInfo)}}).catch(function(S){throw(U(e,S)||d.resolve()).catch(function(){}),S})})}return m(o,r),o}var at={_driver:"asyncStorage",_initStorage:ke,_support:O(),iterate:Xe,getItem:He,setItem:Je,removeItem:qe,clear:Ze,length:et,key:tt,keys:rt,dropInstance:nt};function ot(){return typeof openDatabase=="function"}var H="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",it="~~local_forage_type~",Re=/^~~local_forage_type~([^~]+)~/,oe="__lfsc__:",de=oe.length,he="arbf",ve="blob",Ie="si08",Ne="ui08",Ae="uic8",xe="si16",Te="si32",De="ur16",Le="ui32",Pe="fl32",Ce="fl64",$e=de+he.length,Oe=Object.prototype.toString;function Be(e){var r=e.length*.75,t=e.length,a,o=0,n,i,s,f;e[e.length-1]==="="&&(r--,e[e.length-2]==="="&&r--);var u=new ArrayBuffer(r),l=new Uint8Array(u);for(a=0;a<t;a+=4)n=H.indexOf(e[a]),i=H.indexOf(e[a+1]),s=H.indexOf(e[a+2]),f=H.indexOf(e[a+3]),l[o++]=n<<2|i>>4,l[o++]=(i&15)<<4|s>>2,l[o++]=(s&3)<<6|f&63;return u}function pe(e){var r=new Uint8Array(e),t="",a;for(a=0;a<r.length;a+=3)t+=H[r[a]>>2],t+=H[(r[a]&3)<<4|r[a+1]>>4],t+=H[(r[a+1]&15)<<2|r[a+2]>>6],t+=H[r[a+2]&63];return r.length%3===2?t=t.substring(0,t.length-1)+"=":r.length%3===1&&(t=t.substring(0,t.length-2)+"=="),t}function st(e,r){var t="";if(e&&(t=Oe.call(e)),e&&(t==="[object ArrayBuffer]"||e.buffer&&Oe.call(e.buffer)==="[object ArrayBuffer]")){var a,o=oe;e instanceof ArrayBuffer?(a=e,o+=he):(a=e.buffer,t==="[object Int8Array]"?o+=Ie:t==="[object Uint8Array]"?o+=Ne:t==="[object Uint8ClampedArray]"?o+=Ae:t==="[object Int16Array]"?o+=xe:t==="[object Uint16Array]"?o+=De:t==="[object Int32Array]"?o+=Te:t==="[object Uint32Array]"?o+=Le:t==="[object Float32Array]"?o+=Pe:t==="[object Float64Array]"?o+=Ce:r(new Error("Failed to get type for BinaryArray"))),r(o+pe(a))}else if(t==="[object Blob]"){var n=new FileReader;n.onload=function(){var i=it+e.type+"~"+pe(this.result);r(oe+ve+i)},n.readAsArrayBuffer(e)}else try{r(JSON.stringify(e))}catch(i){console.error("Couldn't convert value into a JSON string: ",e),r(null,i)}}function ft(e){if(e.substring(0,de)!==oe)return JSON.parse(e);var r=e.substring($e),t=e.substring(de,$e),a;if(t===ve&&Re.test(r)){var o=r.match(Re);a=o[1],r=r.substring(o[0].length)}var n=Be(r);switch(t){case he:return n;case ve:return W([n],{type:a});case Ie:return new Int8Array(n);case Ne:return new Uint8Array(n);case Ae:return new Uint8ClampedArray(n);case xe:return new Int16Array(n);case De:return new Uint16Array(n);case Te:return new Int32Array(n);case Le:return new Uint32Array(n);case Pe:return new Float32Array(n);case Ce:return new Float64Array(n);default:throw new Error("Unkown type: "+t)}}var ye={serialize:st,deserialize:ft,stringToBuffer:Be,bufferToString:pe};function Fe(e,r,t,a){e.executeSql("CREATE TABLE IF NOT EXISTS "+r.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],t,a)}function ut(e){var r=this,t={db:null};if(e)for(var a in e)t[a]=typeof e[a]!="string"?e[a].toString():e[a];var o=new d(function(n,i){try{t.db=openDatabase(t.name,String(t.version),t.description,t.size)}catch(s){return i(s)}t.db.transaction(function(s){Fe(s,t,function(){r._dbInfo=t,n()},function(f,u){i(u)})},i)});return t.serializer=ye,o}function X(e,r,t,a,o,n){e.executeSql(t,a,o,function(i,s){s.code===s.SYNTAX_ERR?i.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[r.storeName],function(f,u){u.rows.length?n(f,s):Fe(f,r,function(){f.executeSql(t,a,o,n)},n)},n):n(i,s)},n)}function lt(e,r){var t=this;e=P(e);var a=new d(function(o,n){t.ready().then(function(){var i=t._dbInfo;i.db.transaction(function(s){X(s,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],function(f,u){var l=u.rows.length?u.rows.item(0).value:null;l&&(l=i.serializer.deserialize(l)),o(l)},function(f,u){n(u)})})}).catch(n)});return m(a,r),a}function ct(e,r){var t=this,a=new d(function(o,n){t.ready().then(function(){var i=t._dbInfo;i.db.transaction(function(s){X(s,i,"SELECT * FROM "+i.storeName,[],function(f,u){for(var l=u.rows,v=l.length,g=0;g<v;g++){var S=l.item(g),E=S.value;if(E&&(E=i.serializer.deserialize(E)),E=e(E,S.key,g+1),E!==void 0){o(E);return}}o()},function(f,u){n(u)})})}).catch(n)});return m(a,r),a}function Me(e,r,t,a){var o=this;e=P(e);var n=new d(function(i,s){o.ready().then(function(){r===void 0&&(r=null);var f=r,u=o._dbInfo;u.serializer.serialize(r,function(l,v){v?s(v):u.db.transaction(function(g){X(g,u,"INSERT OR REPLACE INTO "+u.storeName+" (key, value) VALUES (?, ?)",[e,l],function(){i(f)},function(S,E){s(E)})},function(g){if(g.code===g.QUOTA_ERR){if(a>0){i(Me.apply(o,[e,f,t,a-1]));return}s(g)}})})}).catch(s)});return m(n,t),n}function dt(e,r,t){return Me.apply(this,[e,r,t,1])}function ht(e,r){var t=this;e=P(e);var a=new d(function(o,n){t.ready().then(function(){var i=t._dbInfo;i.db.transaction(function(s){X(s,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[e],function(){o()},function(f,u){n(u)})})}).catch(n)});return m(a,r),a}function vt(e){var r=this,t=new d(function(a,o){r.ready().then(function(){var n=r._dbInfo;n.db.transaction(function(i){X(i,n,"DELETE FROM "+n.storeName,[],function(){a()},function(s,f){o(f)})})}).catch(o)});return m(t,e),t}function pt(e){var r=this,t=new d(function(a,o){r.ready().then(function(){var n=r._dbInfo;n.db.transaction(function(i){X(i,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],function(s,f){var u=f.rows.item(0).c;a(u)},function(s,f){o(f)})})}).catch(o)});return m(t,e),t}function yt(e,r){var t=this,a=new d(function(o,n){t.ready().then(function(){var i=t._dbInfo;i.db.transaction(function(s){X(s,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],function(f,u){var l=u.rows.length?u.rows.item(0).key:null;o(l)},function(f,u){n(u)})})}).catch(n)});return m(a,r),a}function mt(e){var r=this,t=new d(function(a,o){r.ready().then(function(){var n=r._dbInfo;n.db.transaction(function(i){X(i,n,"SELECT key FROM "+n.storeName,[],function(s,f){for(var u=[],l=0;l<f.rows.length;l++)u.push(f.rows.item(l).key);a(u)},function(s,f){o(f)})})}).catch(o)});return m(t,e),t}function gt(e){return new d(function(r,t){e.transaction(function(a){a.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(o,n){for(var i=[],s=0;s<n.rows.length;s++)i.push(n.rows.item(s).name);r({db:e,storeNames:i})},function(o,n){t(n)})},function(a){t(a)})})}function bt(e,r){r=j.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var a=this,o;return e.name?o=new d(function(n){var i;e.name===t.name?i=a._dbInfo.db:i=openDatabase(e.name,"","",0),e.storeName?n({db:i,storeNames:[e.storeName]}):n(gt(i))}).then(function(n){return new d(function(i,s){n.db.transaction(function(f){function u(S){return new d(function(E,D){f.executeSql("DROP TABLE IF EXISTS "+S,[],function(){E()},function(A,Y){D(Y)})})}for(var l=[],v=0,g=n.storeNames.length;v<g;v++)l.push(u(n.storeNames[v]));d.all(l).then(function(){i()}).catch(function(S){s(S)})},function(f){s(f)})})}):o=d.reject("Invalid arguments"),m(o,r),o}var _t={_driver:"webSQLStorage",_initStorage:ut,_support:ot(),iterate:ct,getItem:lt,setItem:dt,removeItem:ht,clear:vt,length:pt,key:yt,keys:mt,dropInstance:bt};function wt(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Ue(e,r){var t=e.name+"/";return e.storeName!==r.storeName&&(t+=e.storeName+"/"),t}function St(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch{return!0}}function Et(){return!St()||localStorage.length>0}function Rt(e){var r=this,t={};if(e)for(var a in e)t[a]=e[a];return t.keyPrefix=Ue(e,r._defaultConfig),Et()?(r._dbInfo=t,t.serializer=ye,d.resolve()):d.reject()}function It(e){var r=this,t=r.ready().then(function(){for(var a=r._dbInfo.keyPrefix,o=localStorage.length-1;o>=0;o--){var n=localStorage.key(o);n.indexOf(a)===0&&localStorage.removeItem(n)}});return m(t,e),t}function Nt(e,r){var t=this;e=P(e);var a=t.ready().then(function(){var o=t._dbInfo,n=localStorage.getItem(o.keyPrefix+e);return n&&(n=o.serializer.deserialize(n)),n});return m(a,r),a}function At(e,r){var t=this,a=t.ready().then(function(){for(var o=t._dbInfo,n=o.keyPrefix,i=n.length,s=localStorage.length,f=1,u=0;u<s;u++){var l=localStorage.key(u);if(l.indexOf(n)===0){var v=localStorage.getItem(l);if(v&&(v=o.serializer.deserialize(v)),v=e(v,l.substring(i),f++),v!==void 0)return v}}});return m(a,r),a}function xt(e,r){var t=this,a=t.ready().then(function(){var o=t._dbInfo,n;try{n=localStorage.key(e)}catch{n=null}return n&&(n=n.substring(o.keyPrefix.length)),n});return m(a,r),a}function Tt(e){var r=this,t=r.ready().then(function(){for(var a=r._dbInfo,o=localStorage.length,n=[],i=0;i<o;i++){var s=localStorage.key(i);s.indexOf(a.keyPrefix)===0&&n.push(s.substring(a.keyPrefix.length))}return n});return m(t,e),t}function Dt(e){var r=this,t=r.keys().then(function(a){return a.length});return m(t,e),t}function Lt(e,r){var t=this;e=P(e);var a=t.ready().then(function(){var o=t._dbInfo;localStorage.removeItem(o.keyPrefix+e)});return m(a,r),a}function Pt(e,r,t){var a=this;e=P(e);var o=a.ready().then(function(){r===void 0&&(r=null);var n=r;return new d(function(i,s){var f=a._dbInfo;f.serializer.serialize(r,function(u,l){if(l)s(l);else try{localStorage.setItem(f.keyPrefix+e,u),i(n)}catch(v){(v.name==="QuotaExceededError"||v.name==="NS_ERROR_DOM_QUOTA_REACHED")&&s(v),s(v)}})})});return m(o,t),o}function Ct(e,r){if(r=j.apply(this,arguments),e=typeof e!="function"&&e||{},!e.name){var t=this.config();e.name=e.name||t.name,e.storeName=e.storeName||t.storeName}var a=this,o;return e.name?o=new d(function(n){e.storeName?n(Ue(e,a._defaultConfig)):n(e.name+"/")}).then(function(n){for(var i=localStorage.length-1;i>=0;i--){var s=localStorage.key(i);s.indexOf(n)===0&&localStorage.removeItem(s)}}):o=d.reject("Invalid arguments"),m(o,r),o}var $t={_driver:"localStorageWrapper",_initStorage:Rt,_support:wt(),iterate:At,getItem:Nt,setItem:Pt,removeItem:Lt,clear:It,length:Dt,key:xt,keys:Tt,dropInstance:Ct},Ot=function(r,t){return r===t||typeof r=="number"&&typeof t=="number"&&isNaN(r)&&isNaN(t)},Bt=function(r,t){for(var a=r.length,o=0;o<a;){if(Ot(r[o],t))return!0;o++}return!1},ze=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},re={},Ye={},Z={INDEXEDDB:at,WEBSQL:_t,LOCALSTORAGE:$t},Ft=[Z.INDEXEDDB._driver,Z.WEBSQL._driver,Z.LOCALSTORAGE._driver],ie=["dropInstance"],me=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ie),Mt={description:"",driver:Ft.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Ut(e,r){e[r]=function(){var t=arguments;return e.ready().then(function(){return e[r].apply(e,t)})}}function ge(){for(var e=1;e<arguments.length;e++){var r=arguments[e];if(r)for(var t in r)r.hasOwnProperty(t)&&(ze(r[t])?arguments[0][t]=r[t].slice():arguments[0][t]=r[t])}return arguments[0]}var zt=function(){function e(r){L(this,e);for(var t in Z)if(Z.hasOwnProperty(t)){var a=Z[t],o=a._driver;this[t]=o,re[o]||this.defineDriver(a)}this._defaultConfig=ge({},Mt),this._config=ge({},this._defaultConfig,r),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(t){if((typeof t>"u"?"undefined":y(t))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var a in t){if(a==="storeName"&&(t[a]=t[a].replace(/\W/g,"_")),a==="version"&&typeof t[a]!="number")return new Error("Database version must be a number.");this._config[a]=t[a]}return"driver"in t&&t.driver?this.setDriver(this._config.driver):!0}else return typeof t=="string"?this._config[t]:this._config},e.prototype.defineDriver=function(t,a,o){var n=new d(function(i,s){try{var f=t._driver,u=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver){s(u);return}for(var l=me.concat("_initStorage"),v=0,g=l.length;v<g;v++){var S=l[v],E=!Bt(ie,S);if((E||t[S])&&typeof t[S]!="function"){s(u);return}}var D=function(){for(var ne=function(jt){return function(){var Vt=new Error("Method "+jt+" is not implemented by the current driver"),We=d.reject(Vt);return m(We,arguments[arguments.length-1]),We}},be=0,Wt=ie.length;be<Wt;be++){var _e=ie[be];t[_e]||(t[_e]=ne(_e))}};D();var A=function(ne){re[f]&&console.info("Redefining LocalForage driver: "+f),re[f]=t,Ye[f]=ne,i()};"_support"in t?t._support&&typeof t._support=="function"?t._support().then(A,s):A(!!t._support):A(!0)}catch(Y){s(Y)}});return T(n,a,o),n},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(t,a,o){var n=re[t]?d.resolve(re[t]):d.reject(new Error("Driver not found."));return T(n,a,o),n},e.prototype.getSerializer=function(t){var a=d.resolve(ye);return T(a,t),a},e.prototype.ready=function(t){var a=this,o=a._driverSet.then(function(){return a._ready===null&&(a._ready=a._initDriver()),a._ready});return T(o,t,t),o},e.prototype.setDriver=function(t,a,o){var n=this;ze(t)||(t=[t]);var i=this._getSupportedDrivers(t);function s(){n._config.driver=n.driver()}function f(v){return n._extend(v),s(),n._ready=n._initStorage(n._config),n._ready}function u(v){return function(){var g=0;function S(){for(;g<v.length;){var E=v[g];return g++,n._dbInfo=null,n._ready=null,n.getDriver(E).then(f).catch(S)}s();var D=new Error("No available storage method found.");return n._driverSet=d.reject(D),n._driverSet}return S()}}var l=this._driverSet!==null?this._driverSet.catch(function(){return d.resolve()}):d.resolve();return this._driverSet=l.then(function(){var v=i[0];return n._dbInfo=null,n._ready=null,n.getDriver(v).then(function(g){n._driver=g._driver,s(),n._wrapLibraryMethodsWithReady(),n._initDriver=u(i)})}).catch(function(){s();var v=new Error("No available storage method found.");return n._driverSet=d.reject(v),n._driverSet}),T(this._driverSet,a,o),this._driverSet},e.prototype.supports=function(t){return!!Ye[t]},e.prototype._extend=function(t){ge(this,t)},e.prototype._getSupportedDrivers=function(t){for(var a=[],o=0,n=t.length;o<n;o++){var i=t[o];this.supports(i)&&a.push(i)}return a},e.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,a=me.length;t<a;t++)Ut(this,me[t])},e.prototype.createInstance=function(t){return new e(t)},e}(),Yt=new zt;N.exports=Yt},{3:3}]},{},[4])(4)})}(we)),we.exports}var Jt=Xt();const Ve=Ht(Jt),qt=Gt`
  form {
    display: flex;
    flex-direction: column;
  }
  sl-button::part(base) {
    border-radius: 0;
    border: 0;
  }
  sl-card::part(base) {
    width: 100% !important;
  }
`;var Zt=Object.defineProperty,er=Object.getOwnPropertyDescriptor,k=(h,_,p,N)=>{for(var x=N>1?void 0:N?er(_,p):_,y=h.length-1,L;y>=0;y--)(L=h[y])&&(x=(N?L(_,p,x):L(x))||x);return N&&x&&Zt(_,p,x),x};let V=class extends Kt{constructor(){super(),this.player1={life:20},this.player2={life:20},this.gameResults=[],this.playerName1="Player 1",this.playerName2="Player 2",this.initialLife=20,this.storageKey="playerData",this.player1Actions=[],this.player2Actions=[],this.loadFromStorage()}firstUpdated(){this.saveToStorage()}updateLife(h,_,p){h===1?(this.player1={...this.player1,life:Math.max(0,this.player1.life+_)},console.log(`${p} ${Math.abs(_)} to ${this.player1.life}`),this.player1Actions=[...this.player1Actions,`${p} ${Math.abs(_)} to ${this.player1.life}`]):(this.player2={...this.player2,life:Math.max(0,this.player2.life+_)},console.log(`${p} ${Math.abs(_)} to ${this.player2.life}`),this.player2Actions=[...this.player2Actions,`${p} ${Math.abs(_)} to ${this.player2.life}`]),this.saveToStorage()}setInitialLife(h){const _=h.target,p=parseInt(_.value,10);!isNaN(p)&&p>=0?(this.initialLife=p,this.player1={life:p},this.player2={life:p},this.saveToStorage()):(alert("Please enter a valid positive number for starting life."),_.value=this.initialLife.toString())}handlePlayerNameChange(h,_){const p=_.target.value||(h===1?"Player 1":"Player 2");h===1?this.playerName1=p:this.playerName2=p,this.saveToStorage()}recordResult(h){let _="loss",p="loss";h===1?(_="win",p="loss"):h===2?(_="loss",p="win"):h==="draw"&&(_="draw",p="draw");const N={player1Name:this.playerName1,player2Name:this.playerName2,player1Life:this.player1.life,player2Life:this.player2.life,player1Result:_,player2Result:p};this.gameResults=[...this.gameResults,N],this.saveToStorage(),this.resetGame()}resetGame(){this.player1={life:this.initialLife},this.player2={life:this.initialLife}}saveToStorage(){const h={player1:this.player1,player2:this.player2,playerName1:this.playerName1,playerName2:this.playerName2,initialLife:this.initialLife,gameResults:this.gameResults,player1Actions:this.player1Actions,player2Actions:this.player2Actions};Ve.setItem(this.storageKey,h).catch(console.error)}loadFromStorage(){Ve.getItem(this.storageKey).then(h=>{h&&(this.player1=h.player1||{life:20},this.player2=h.player2||{life:20},this.playerName1=h.playerName1||"Player 1",this.playerName2=h.playerName2||"Player 2",this.initialLife=h.initialLife||20,this.gameResults=h.gameResults||[],this.player1Actions=h.player1Actions||[],this.player2Actions=h.player2Actions||[])}).catch(console.error)}getPlayerStats(h){const _=this.gameResults.filter(y=>y.player1Name===h||y.player2Name===h),p=_.filter(y=>y.player1Name===h&&y.player1Result==="win"||y.player2Name===h&&y.player2Result==="win").length,N=_.filter(y=>y.player1Name===h&&y.player1Result==="loss"||y.player2Name===h&&y.player2Result==="loss").length,x=_.filter(y=>y.player1Name===h&&y.player1Result==="draw"||y.player2Name===h&&y.player2Result==="draw").length;return{wins:p,losses:N,draws:x}}exportToCSV(){const h="data:text/csv;charset=utf-8,"+this.convertArrayOfObjectsToCSV(this.gameResults),_=encodeURI(h),p=document.createElement("a");p.setAttribute("href",_),p.setAttribute("download","game_results.csv"),document.body.appendChild(p),p.click(),document.body.removeChild(p)}convertArrayOfObjectsToCSV(h){if(!h||h.length===0)return"";const _=Object.keys(h[0]).join(","),p=h.map(N=>Object.values(N).map(x=>`"${x}"`).join(",")).join(`
`);return _+`
`+p}render(){return se`
      <app-header ?enableBack="${!0}"></app-header>
      <main>
        <h2>Counter Page</h2>
        <sl-details summary="Game Details">
          <div style="display: flex; flex-direction: row;">
            <sl-input
              type="number"
              label="Starting Life"
              size="small"
              type="number"
              value=${this.initialLife}
              @sl-change=${this.setInitialLife}
              min="0"
            ></sl-input>
            <sl-input
              inputmode="text"
              label="Player 1"
              size="small"
              clearable
              placeholder="Add player name"
              value=${this.playerName1}
              @sl-change=${h=>this.handlePlayerNameChange(1,h)}
            ></sl-input>
            <sl-input
              label="Player 2"
              size="small"
              clearable
              placeholder="Add player name"
              value=${this.playerName2}
              @sl-change=${h=>this.handlePlayerNameChange(2,h)}
            ></sl-input>
          </div>
          <sl-button @click=${this.exportToCSV}>Export to CSV</sl-button>
        </sl-details>
        <sl-tab-group>
          <sl-tab slot="nav" panel="total">Total</sl-tab>
          <sl-tab slot="nav" panel="track">Track</sl-tab>
          <sl-tab-panel name="total">
            <div class="display-flex flex-direction-row gap-1 justify-content-around">
              <sl-card>
                <form>
                  <span class="text-center text-xlarge">${this.player1.life}</span>
                  <sl-button @click=${()=>this.updateLife(1,-1,"Lose")}>
                    <sl-icon name="subtract" slot="prefix"></sl-icon>
                    Lose Life
                  </sl-button>
                  <sl-button @click=${()=>this.updateLife(1,1,"Gain")}>
                    <sl-icon name="plus" slot="prefix"></sl-icon>
                    Gain Life
                  </sl-button>
                </form>
              </sl-card>
              <sl-card>
                <form>
                  <span class="text-center text-xlarge">${this.player2.life}</span>
                  <sl-button @click=${()=>this.updateLife(2,-1,"Lose")}>
                    <sl-icon name="subtract" slot="prefix"></sl-icon>
                    Lose Life
                  </sl-button>
                  <sl-button @click=${()=>this.updateLife(2,1,"Gain")}>
                    <sl-icon name="plus" slot="prefix"></sl-icon>
                    Gain Life
                  </sl-button>
                </form>
              </sl-card>
            </div>
          </sl-tab-panel>
          <sl-tab-panel name="track">
            <div style="display: flex; justify-content: space-around;">
            <div>
            <strong>${this.playerName1}</strong>
            <ul class="list-group list-group-flush">
              ${this.player1Actions.map(h=>se`<li class="list-group-item" title=${h}>${h}</li>`)}
            </ul>
            </div>
            <div>
            <strong>${this.playerName2}</strong>
            <ul class="list-group list-group-flush">
              ${this.player2Actions.map(h=>se`<li class="list-group-item">${h}</li>`)}
            </ul>
            </div>
            </div>
          </sl-tab-panel>
        </sl-tab-group>
        <div style="display: flex;
        width: 100%;
        >
          <sl-button-group label="Alignment">
            <sl-button size="medium" @click=${()=>this.recordResult(1)}>${this.playerName1} Wins</sl-button>
            <sl-button size="medium" @click=${()=>this.recordResult("draw")}>Draw</sl-button>
            <sl-button size="medium" @click=${()=>this.recordResult(2)}>${this.playerName2} Wins</sl-button>
          </sl-button-group>
          <style>
            sl-button-group {
            display: flex; flex-direction: row;}
            sl-button {
            width: 100%;}
          </style>
        </div>
        <sl-card class="tab-card">
        <sl-tab-group>
          <sl-tab slot="nav" panel="results">Results</sl-tab>
          <sl-tab slot="nav" panel="standings">Standings</sl-tab>
          <sl-tab-panel name="results">
            <table bordered table-striped>
              <thead>
                <tr>
                  <th>${this.playerName1}</th>
                  <th>${this.playerName2}</th>
                </tr>
              </thead>
              <tbody>
                ${this.gameResults.map(h=>se`
                    <tr>
                      <td>${h.player1Result}</td>
                      <td>${h.player2Result}</td>
                    </tr>
                  `)}
              </tbody>
            </table>
          </sl-tab-panel>
          <sl-tab-panel name="standings">
            <table class="border table-striped">
              <thead>
                <tr>
                  <th>Player</th>
                  <th>Wins</th>
                  <th>Losses</th>
                  <th>Draws</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>${this.playerName1}</td>
                  <td>${this.getPlayerStats(this.playerName1).wins}</td>
                  <td>${this.getPlayerStats(this.playerName1).losses}</td>
                  <td>${this.getPlayerStats(this.playerName1).draws}</td>
                </tr>
                <tr>
                  <td>${this.playerName2}</td>
                  <td>${this.getPlayerStats(this.playerName2).wins}</td>
                  <td>${this.getPlayerStats(this.playerName2).losses}</td>
                  <td>${this.getPlayerStats(this.playerName2).draws}</td>
                </tr>
              </tbody>
            </table>
          </sl-tab-panel>
        </sl-tab-group>
        </sl-card>
      </main>
    `}};V.styles=[Qt,qt];k([Ge({type:Object})],V.prototype,"player1",2);k([Ge({type:Object})],V.prototype,"player2",2);k([ee()],V.prototype,"gameResults",2);k([ee()],V.prototype,"playerName1",2);k([ee()],V.prototype,"playerName2",2);k([ee()],V.prototype,"initialLife",2);k([ee()],V.prototype,"player1Actions",2);k([ee()],V.prototype,"player2Actions",2);V=k([kt("app-counter")],V);export{V as AppCounter};
//# sourceMappingURL=app-counter-CgOC9BO4.js.map
